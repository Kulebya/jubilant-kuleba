# Финансовый Менеджер (Financial Manager)

## Цель проекта

Этот проект разработан для упрощения управления финансами: фильтрации и сортировки транзакций на основе их состояния и
даты выполнения. Он предоставляет функции для работы с списком транзакций, представленным в виде словарей.

## Установить

Чтобы использовать проект, просто скопируйте его репозиторий на свой локальный компьютер или загрузите необходимые файлы
в вашу среду разработки.

git clone https://github.com/Kulebya/jubilant-kuleba.git


## Использование

Для использования функций, находящихся в модуле `processing.py`, просто импортируйте их в своем коде:

from processing import filter_by_state, sort_by_date

### Описание функций

1. **filter_by_state(transactions: List[Dict], state: Optional[str] = 'EXECUTED') -> List[Dict]**
    - Эта функция фильтрует список транзакций по значению ключа `state`.
    - Параметры:
        - `transactions`: Список словарей с транзакциями.
        - `state`: Строка, по которой нужно фильтровать транзакции. По умолчанию `'EXECUTED'`.
    - Возвращает новый список словарей, у которых ключ `state` соответствует указанному значению.

2. **sort_by_date(transactions: List[Dict], descending: Optional[bool] = True) -> List[Dict]**
    - Эта функция сортирует список транзакций по дате.
    - Параметры:
        - `transactions`: Список словарей с транзакциями.
        - `descending`: Булевое значение, указывающее, по убыванию (по умолчанию `True`) или по возрастанию (если
          `False`).
    - Возвращает новый отсортированный список.

### Примеры работы с функциями

# Пример входных данных

transactions = [
{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}
]

# Фильтрация по состоянию

executed_transactions = filter_by_state(transactions)
print(executed_transactions) # Возвращает только транзакции со статусом 'EXECUTED'

# Сортировка по дате (убывание)

sorted_transactions_descending = sort_by_date(transactions)
print(sorted_transactions_descending) # Сортированный список по дате (последние операции первыми)

# Сортировка по дате (возрастание)

sorted_transactions_ascending = sort_by_date(transactions, descending=False)
print(sorted_transactions_ascending) # Сортированный список по дате (первые операции первыми)

**filter_by_currency**
Функция принимает на вход список словарей, представляющих транзакции.
Возвращать итератор, который поочередно выдает транзакции, где валюта операции соответствует заданной (например, USD).

### Примеры работы с функциями

# Пример входных данных

usd_transactions = filter_by_currency(transactions, "USD")
for _ in range(2):
print(next(usd_transactions))

> > > {
"id": 939719570,
"state": "EXECUTED",
"date": "2018-06-30T02:08:58.425572",
"operationAmount": {
"amount": "9824.07",
"currency": {
"name": "USD",
"code": "USD"
> > > }
> > > },
"description": "Перевод организации",
"from": "Счет 75106830613657916952",
"to": "Счет 11776614605963066702"
> > > }
> > > {
"id": 142264268,
"state": "EXECUTED",
"date": "2019-04-04T23:20:05.206878",
"operationAmount": {
"amount": "79114.93",
"currency": {
"name": "USD",
"code": "USD"
> > > }
> > > },
"description": "Перевод со счета на счет",
"from": "Счет 19708645243227258542",
"to": "Счет 75651667383060284188"
> > > }

**transaction_descriptions**
, который принимает список словарей с транзакциями и возвращает описание каждой операции по очереди.

### Примеры работы с функциями

# Пример входных данных

descriptions = transaction_descriptions(transactions)
for _ in range(5):
print(next(descriptions))

> > > Перевод организации
> > > Перевод со счета на счет
> > > Перевод со счета на счет
> > > Перевод с карты на карту
> > > Перевод организации

**card_number_generator**
, который выдает номера банковских карт в формате
XXXX XXXX XXXX XXXX
, где X — цифра номера карты. Генератор может сгенерировать номера карт в заданном диапазоне от 0000 0000 0000 0001 до 9999 9999
9999 9999.
Генератор должен принимать начальное и конечное значения для генерации диапазона номеров.

Пример использования функции
for card_number in card_number_generator(1, 5):
print(card_number)

> > > 0000 0000 0000 0001
> > > 0000 0000 0000 0002
> > > 0000 0000 0000 0003
> > > 0000 0000 0000 0004
> > > 0000 0000 0000 0005

## Тестирование

Проект включает тесты для проверки правильности работы ключевых функций.

#### Как запустить тесты:
Вы можете запустить тесты, выполнив следующую команду из корневой директории проекта:

pytest tests/test_masks.py
pytest tests/test_witget.py
pytest tests/test_processing.py
pytest tests/test_generators.py

### Описание тестов
Тесты включают проверку следующих функций:
- `get_mask_card_number`: Проверяет корректность маскирования номеров кредитных карт 
    в различных сценариях.
- `get_mask_account`: Проверяет корректность маскирования номеров банковских счетов.
- `filter_by_state`: Фильтрует список словарей по значению ключа 'state'.
- `sort_by_date` : Сортирует список словарей по дате в указанном порядке.
- `get_date`: Принимает на вход строку с датой в формате "2024-03-11T02:26:18.671407"
  возвращает строку с датой в формате "ДД.ММ.ГГГГ" ("11.03.2024")"""
- `mask_account_card`: Обрабатывает информацию о картах и счетах и возвращает замаскированный номер.
- `def filter_by_currency`: Принимает на вход список словарей, представляющих транзакции.
  возвращает операции соответствующие заданной валюте"""
- `transaction_descriptions`: Принимает список словарей с транзакциями и возвращает описание каждой операции по
  очереди"""
- `card_number_generator`: Выдает номера банковских карт в формате XXXX XXXX XXXX XXXX, где X — цифра номера карты"""
- Каждый тест проверяет, что результат функции соответствует ожидаемому значению для 
различных входных данных, включая пустые строки, короткие и длинные номера.

## В проекте используются декораторы:

- декоратор `log`, автоматически логирует начало и конец выполнения функций, а также их результаты или возникшие ошибки.
  Декоратор может записывать логи в файл или выводить их в консоль.

## Использование

Вы можете использовать декоратор `log`, применяя его к вашей функции. Вот пример использования:

python
from logger import log

@log(filename="mylog.txt")
def my_function(x, y):
return x + y

my_function(1, 2) # Запись логов в файл

Если вы не укажете `filename`, логи будут выводиться в консоль:

python
@log()
def my_function(x, y):
return x + y

my_function(3, 4) # Вывод логов в консоль

## Функциональность

- Логирование имени функции и результата выполнения при успешном выполнении.
- Логирование типа ошибки и входных параметров при возникновении исключения.
- Поддержка записи логов в файл или в консоль, в зависимости от переданного аргумента.

## Тестирование

Проект включает тесты с использованием `pytest`, которые проверяют функциональность декоратора и покрывают различные
сценарии использования:

- Успешное выполнение функций.
- Обработка исключений.
- Проверка логирования в файл.

### Запуск тестов

Для запуска тестов выполните следующую команду в терминале:

pytest test_decorators.py

## Лицензия

Этот проект лицензирован под MIT License. Пожалуйста, ознакомьтесь с файлом LICENSE для получения дополнительной
информации.

## Вклад

Если вы хотите внести свой вклад в проект, вы можете создать запрос на изменения (pull request) или сообщить об ошибках
через систему отслеживания проблем.

## Контакты

Если у вас возникли вопросы или предложения, пожалуйста, свяжитесь с Aнной Куликовой по адресу ang-29@yandex.ru.
